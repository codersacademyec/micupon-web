{"version":3,"sources":["indexService.js","indexCtrl.js"],"names":["indexService","globalService","socialProvider","login","i","Stamplay","User","socialLogin","getItems","filtro","post","then","resp","updateItem","item","deleteItem","saveItem","service","busqueda","modificar","eliminar","nuevo","indexCtrl","$scope","$modal","vm","this","bandas","showFiltros","showNuevo","filtros","bandaSeleccionada","modalEliminar","scope","template","html","show","animation","tableConfig","itemsPerPage","fillLastPage","ingresar","ocultarSide","buscar","bandasService","data","$promise","confirmarElim","hide","guardar","limpiarFiltros","angular","module","factory","controller"],"mappings":"AAEA,QAAAA,cAAAC,EAAAC,GAUA,QAAAC,GAAAC,GACAC,SAAAC,KAAAC,YAAAL,EAAAE,IAGA,QAAAI,GAAAC,GACA,MAAAR,GAAAS,KAAA,qBACAD,OAAAA,IACAE,KAAA,SAAAC,GACA,MAAAA,KAIA,QAAAC,GAAAC,GACA,MAAAb,GAAAS,KAAA,WACAI,KAAAA,IACAH,KAAA,SAAAC,GACA,MAAAA,KAIA,QAAAG,GAAAD,GACA,MAAAb,GAAAS,KAAA,WACAI,KAAAA,IACAH,KAAA,SAAAC,GACA,MAAAA,KAIA,QAAAI,GAAAF,GACA,MAAAb,GAAAS,KAAA,WACAI,KAAAA,IACAH,KAAA,SAAAC,GACA,MAAAA,KAzCA,GAAAK,IACAC,SAAAV,EACAW,UAAAN,EACAO,SAAAL,EACAM,MAAAL,EACAb,MAAAA,EAGA,OAAAc,GCTA,QAAAK,WAAAC,EAAAtB,EAAAD,EAAAwB,GACA,GAAAC,GAAAC,IACAD,GAAAE,UACAF,EAAAxB,cAAAA,EACAwB,EAAAG,aAAA,EACAH,EAAAI,WAAA,EACAJ,EAAAK,WACAL,EAAAJ,SACAI,EAAAM,qBACAN,EAAAO,cAAAR,GAAAS,MAAAV,EAAAW,SAAA,ybAAAC,MAAA,EAAAC,MAAA,EAAAC,UAAA,iBACAZ,EAAAa,aACAC,aAAA,EACAC,cAAA,GAGAf,EAAAgB,SAAA,SAAArC,GACAJ,EAAAG,MAAAC,IAEAqB,EAAAiB,YAAA,WACAjB,EAAAG,aAAA,EACAH,EAAAI,WAAA,GAGAJ,EAAAkB,OAAA,WACAC,cAAA1B,SAAAO,EAAAK,SAAAnB,KAAA,SAAAkC,GACApB,EAAAE,OAAAkB,EACApB,EAAAG,aAAA,KAIAH,EAAAL,SAAA,SAAAN,GACAW,EAAAM,kBAAAjB,EACAW,EAAAO,cAAAc,SAAAnC,KAAAc,EAAAO,cAAAI,OAGAX,EAAAsB,cAAA,WACAH,cAAAxB,SAAAK,EAAAM,mBAAApB,KAAA,SAAAkC,GACApB,EAAAO,cAAAc,SAAAnC,KAAAc,EAAAO,cAAAgB,SAIAvB,EAAAwB,QAAA,WACAL,cAAAvB,MAAAI,EAAAJ,OAAAV,KAAA,SAAAkC,GACApB,EAAAiB,iBAIAjB,EAAAyB,eAAA,WACAzB,EAAAK,YAGAL,EAAAkB,SDrDAQ,QAAAC,OAAA,WAAAC,QAAA,gBAAA,gBAAA,iBAAArD,eCAAmD,QAAAC,OAAA,WAAAE,WAAA,aAAA,SAAA,gBAAA,gBAAA,SAAAhC","file":"../index.js","sourcesContent":["angular.module('micupon').factory('indexService', ['globalService','socialProvider',indexService]);\n\nfunction indexService(globalService,socialProvider) {\n    var service = {\n        busqueda: getItems,\n        modificar: updateItem,\n        eliminar: deleteItem,\n        nuevo: saveItem,\n        login: login\n    };\n\n    return service;\n    function login(i){\n        Stamplay.User.socialLogin(socialProvider[i]);    \n    }\n    \n    function getItems(filtro) {\n        return globalService.post('mocks/bandas.json', {\n            filtro: filtro\n        }).then(function(resp) {\n            return resp;\n        });\n    }\n\n    function updateItem(item){\n        return globalService.post('backend', {\n            item: item\n        }).then(function(resp) {\n            return resp;\n        });\n    }\n\n    function deleteItem(item){\n        return globalService.post('backend', {\n            item: item\n        }).then(function(resp) {\n            return resp;\n        });\n    }\n\n    function saveItem(item){\n        return globalService.post('backend', {\n            item: item\n        }).then(function(resp) {\n            return resp;\n        });        \n    }\n}","angular.module('micupon').controller('indexCtrl',['$scope','globalService','bandasService','$modal',indexCtrl]);\n\nfunction indexCtrl($scope,globalService,indexService,$modal) {\n\tvar vm = this;\n\tvm.bandas = [];\n\tvm.globalService = globalService;\n\tvm.showFiltros = false;\n\tvm.showNuevo = false;\n\tvm.filtros = {};\n\tvm.nuevo = {};\n\tvm.bandaSeleccionada = {};\n\tvm.modalEliminar = $modal({scope:$scope, template: '<div class=\"modal\"><div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\"><div class=\"modal-header\"><h4 class=\"modal-title\">Eliminar la banda horaria con id {{ctrl.bandaSeleccionada.id}}?</h4></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"$hide()\">Cancelar</button><button type=\"button\" class=\"btn btn-danger\" ng-click=\"ctrl.confirmarElim()\">Eliminar</button></div></div></div></div>', html:true, show: false,animation:'am-slide-top'});\n\tvm.tableConfig = {\n\t    itemsPerPage: 5,\n\t    fillLastPage: true\n\t  };\n\n\tvm.ingresar = function(i){\n\t\tindexService.login(i);\n\t};\n\tvm.ocultarSide = function(){\n\t\tvm.showFiltros = false;\n\t\tvm.showNuevo = false;\n\t};\n\n\tvm.buscar = function(){\n\t\tbandasService.busqueda(vm.filtros).then(function(data){\n\t\t\tvm.bandas = data;\n\t\t\tvm.showFiltros = false;\n\t\t});\t\n\t};\n\n\tvm.eliminar = function(item){\n\t\tvm.bandaSeleccionada = item;\n\t\tvm.modalEliminar.$promise.then(vm.modalEliminar.show);\n\t};\n\n\tvm.confirmarElim = function(){\n\t\tbandasService.eliminar(vm.bandaSeleccionada).then(function(data){\n\t\t\tvm.modalEliminar.$promise.then(vm.modalEliminar.hide);\n\t\t});\n\t};\n\n\tvm.guardar = function(){\n\t\tbandasService.nuevo(vm.nuevo).then(function(data){\n\t\t\tvm.ocultarSide();\n\t\t});\n\t};\n\t\n\tvm.limpiarFiltros = function(){\n\t\tvm.filtros = {};\n\t};\n\n\tvm.buscar();\n\n}"]}