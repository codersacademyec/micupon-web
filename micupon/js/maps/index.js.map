{"version":3,"sources":["indexService.js","indexCtrl.js"],"names":["indexService","globalService","socialProvider","login","i","Stamplay","User","socialLogin","getItems","filtro","Object","get","then","res","data","updateItem","item","update","err","deleteItem","remove","saveItem","save","addAlert","service","busqueda","modificar","eliminar","nuevo","indexCtrl","$scope","$modal","vm","this","cupones","showFiltros","showNuevo","filtros","itemSeleccionado","modalEliminar","scope","template","html","show","animation","tableConfig","itemsPerPage","fillLastPage","ingresar","ocultarSide","buscar","$apply","$promise","confirmarElim","hide","guardar","limpiarFiltros","angular","module","factory","controller"],"mappings":"AAEA,QAAAA,cAAAC,EAAAC,GAUA,QAAAC,GAAAC,GACAC,SAAAC,KAAAC,YAAAL,EAAAE,IAGA,QAAAI,GAAAC,GACA,MAAAJ,UAAAK,OAAA,WAAAC,IAAAF,GACAG,KAAA,SAAAC,GACA,MAAAA,GAAAC,OAIA,QAAAC,GAAAC,GACAX,SAAAK,OAAA,WAAAO,OAAA,SAAAD,GACAJ,KAAA,SAAAC,KAEA,SAAAK,MAKA,QAAAC,GAAAH,GACAX,SAAAK,OAAA,WAAAU,OAAA,UACAR,KAAA,SAAAC,KAEA,SAAAK,MAKA,QAAAG,GAAAL,GACAX,SAAAK,OAAA,WAAAY,KAAAN,GACAJ,KAAA,SAAAC,GACAU,YACA,SAAAL,MA1CA,GAAAM,IACAC,SAAAjB,EACAkB,UAAAX,EACAY,SAAAR,EACAS,MAAAP,EACAlB,MAAAA,EAGA,OAAAqB,GCTA,QAAAK,WAAAC,EAAA7B,EAAAD,EAAA+B,GACA,GAAAC,GAAAC,IACAD,GAAA/B,cAAAA,EACA+B,EAAAE,WACAF,EAAAG,aAAA,EACAH,EAAAI,WAAA,EACAJ,EAAAK,WACAL,EAAAJ,SACAI,EAAAM,oBACAN,EAAAO,cAAAR,GAAAS,MAAAV,EAAAW,SAAA,ybAAAC,MAAA,EAAAC,MAAA,EAAAC,UAAA,iBACAZ,EAAAa,aACAC,aAAA,EACAC,cAAA,GAGAf,EAAAgB,SAAA,SAAA5C,GACAJ,EAAAG,MAAAC,IAGA4B,EAAAiB,YAAA,WACAjB,EAAAG,aAAA,EACAH,EAAAI,WAAA,GAGAJ,EAAAkB,OAAA,WACAlD,EAAAyB,SAAAO,EAAAK,SAAAzB,KAAA,SAAAE,GACAkB,EAAAE,QAAApB,EACAkB,EAAAG,aAAA,EACAL,EAAAqB,YAIAnB,EAAAL,SAAA,SAAAX,GACAgB,EAAAM,iBAAAtB,EACAgB,EAAAO,cAAAa,SAAAxC,KAAAoB,EAAAO,cAAAI,OAGAX,EAAAqB,cAAA,WACArD,EAAA2B,SAAAK,EAAAM,kBAAA1B,KAAA,SAAAE,GACAkB,EAAAO,cAAAa,SAAAxC,KAAAoB,EAAAO,cAAAe,SAIAtB,EAAAuB,QAAA,SAAAvC,GACAhB,EAAAqB,SAAAL,IAGAgB,EAAAwB,eAAA,WACAxB,EAAAK,YAGAL,EAAAkB,SDrDAO,QAAAC,OAAA,WAAAC,QAAA,gBAAA,gBAAA,iBAAA3D,eCAAyD,QAAAC,OAAA,WAAAE,WAAA,aAAA,SAAA,gBAAA,eAAA,SAAA/B","file":"../index.js","sourcesContent":["angular.module('micupon').factory('indexService', ['globalService','socialProvider',indexService]);\r\n\r\nfunction indexService(globalService,socialProvider) {\r\n    var service = {\r\n        busqueda: getItems,\r\n        modificar: updateItem,\r\n        eliminar: deleteItem,\r\n        nuevo: saveItem,\r\n        login: login\r\n    };\r\n\r\n    return service;\r\n    function login(i){\r\n        Stamplay.User.socialLogin(socialProvider[i]);    \r\n    }\r\n    \r\n    function getItems(filtro) {\r\n        return Stamplay.Object(\"cupones\").get(filtro)\r\n        .then(function(res) {\r\n          return res.data;\r\n        }); \r\n    };\r\n\r\n    function updateItem(item){\r\n       Stamplay.Object(\"cupones\").update(\"codigo\",item)\r\n        .then(function(res) {\r\n          // success\r\n        }, function(err) {\r\n          // error\r\n        }) \r\n    }\r\n\r\n    function deleteItem(item){\r\n       Stamplay.Object(\"cupones\").remove(\"codigo\")\r\n        .then(function(res) {\r\n          // success\r\n        }, function(err) {\r\n          // error\r\n        }) \r\n    }\r\n\r\n    function saveItem(item){\r\n        Stamplay.Object(\"cupones\").save(item)\r\n        .then(function(res) {\r\n           addAlert();\r\n        }, function(err) {\r\n            // TODO MOSTRAR ERROR\r\n        })       \r\n    }\r\n\r\n\r\n}","angular.module('micupon').controller('indexCtrl',['$scope','globalService','indexService','$modal',indexCtrl]);\r\n\r\nfunction indexCtrl($scope,globalService,indexService,$modal) {\r\n\tvar vm = this;\r\n\tvm.globalService = globalService;\r\n\tvm.cupones = [];\r\n\tvm.showFiltros = false;\r\n\tvm.showNuevo = false;\r\n\tvm.filtros = {};\r\n\tvm.nuevo = {};\r\n\tvm.itemSeleccionado = {};\r\n\tvm.modalEliminar = $modal({scope:$scope, template: '<div class=\"modal\"><div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\"><div class=\"modal-header\"><h4 class=\"modal-title\">Eliminar la banda horaria con id {{ctrl.bandaSeleccionada.id}}?</h4></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"$hide()\">Cancelar</button><button type=\"button\" class=\"btn btn-danger\" ng-click=\"ctrl.confirmarElim()\">Eliminar</button></div></div></div></div>', html:true, show: false,animation:'am-slide-top'});\r\n\tvm.tableConfig = {\r\n\t    itemsPerPage: 5,\r\n\t    fillLastPage: true\r\n\t  };\r\n\r\n\tvm.ingresar = function(i){\r\n\t\tindexService.login(i);\r\n\t};\r\n\r\n\tvm.ocultarSide = function(){\r\n\t\tvm.showFiltros = false;\r\n\t\tvm.showNuevo = false;\r\n\t};\r\n\r\n\tvm.buscar = function(){\r\n\t\tindexService.busqueda(vm.filtros).then(function(data){\r\n\t\t\tvm.cupones = data;\r\n\t\t\tvm.showFiltros = false;\r\n\t\t\t$scope.$apply();\r\n\t\t});\t\r\n\t};\r\n\r\n\tvm.eliminar = function(item){\r\n\t\tvm.itemSeleccionado = item;\r\n\t\tvm.modalEliminar.$promise.then(vm.modalEliminar.show);\r\n\t};\r\n\r\n\tvm.confirmarElim = function(){\r\n\t\tindexService.eliminar(vm.itemSeleccionado).then(function(data){\r\n\t\t\tvm.modalEliminar.$promise.then(vm.modalEliminar.hide);\r\n\t\t});\r\n\t};\r\n\r\n\tvm.guardar = function(item){\r\n\t\tindexService.saveItem(item);\r\n\t};\r\n\t\r\n\tvm.limpiarFiltros = function(){\r\n\t\tvm.filtros = {};\r\n\t};\r\n\r\n\tvm.buscar();\r\n\r\n}"]}